description: "# Status: \U0001F441️‍\U0001F5E8️\n\n## ⚡ About\nA Snapshot is represents the individual, daily value of a datapoint. They are used to render the datapoint's value on MAP in a sinple and efficient way, avoiding complex and resource comsiming calculations in the client.\n\nSnapshots are stored in Answer objects. This allows to reuse the same Model for both RAW and Snapshot data since there is no difference between both.\nFor more information about RAW and Snapshot data, see the diagram below.\n\n![image](https://user-images.githubusercontent.com/9198668/104857302-69abf700-5952-11eb-9918-93a6736af696.png)\n❓ >> Make proper diagram\n\n## \U0001F310 Expanded information\nMore information about Snapshots can be found on the \n\n## Snapshot generation\nSnapshots can be generated in a number of ways.\n\n\U0001F536 **Deduced** - Generated by applying some sort of methodology over the DSE data to extract a pattern that is relevant. This type of snapshot is generated by a PLD script based on the data obtained from all the \U0001F4E6 [DataSet Entry](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/DataSetEntry) in a \U0001F4E6 [DataSet Layer](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/DataSetLayer) or from the **Encoded Snapshopt** data from an external 3rd party (see below).\n\n**Examples**\n- COVID-19 NPIs: Military presence policy without DateEnd\n- COVID-19 NPIs: Schools closed for over 3 months\n\n▶ **Snapshot example from PLD DSL RAW data**: A RAW datapoint encoded with an \U0001F4E6[Answer](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/Answer) like this \n```\n- Answer\n  - Type: \"RAW\" \n  - GeneratedBy: \"Funnel:IS\"\n  - Value: \"3\"\n  - DateStart: \"01/01/2020\"\n  - DateEnd: \"03/01/2020'\n```\nwould generate a Snapshot encoded with an \U0001F4E6[Answer](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/Answer) like this \n```\n- Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: Snapshot\"\n  - Value: \"3\"\n  - DateStart: \"01/01/2020\"\n  - DateEnd: \"01/01/2020\"\n\n- Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: Snapshot\"\n  - Value: \"3\"\n  - DateStart: \"02/01/2020\"\n  - DateEnd: \"02/01/2020\"\n\n- Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: Snapshot\"\n  - Value: \"3\"\n  - DateStart: \"03/01/2020\"\n  - DateEnd: \"03/01/2020\"\n```\n\n▶ **Snapshot example from a 3rd party ENCODED Snapshot data** (see below): \nFollowing the example indicated above, a Snapshot encoded with an [Answer](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/Answer) like this (which was obtained from a 3rd party \n```\n- Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: API\"\n  - Value: \"125.000\"\n  - DateStart: \"01/01/2020\"\n  - DateEnd: \"01/01/2020'\n \n - Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: API\"\n  - Value: \"147.000\"\n  - DateStart: \"02/01/2020\"\n  - DateEnd: \"02/01/2020'\n \n  - Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: API\"\n  - Value: \"152.000\"\n  - DateStart: \"03/01/2020\"\n  - DateEnd: \"03/01/2020'\n```\nwould generate a Snapshot encoded with an \U0001F4E6[Answer](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/Answer) like this \n```\n- Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: Snapshot\"\n  - Value: \"0\"\n  - DateStart: \"01/01/2020\"\n  - DateEnd: \"01/01/2020\"\n\n- Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: Snapshot\"\n  - Value: \"1\"\n  - DateStart: \"02/01/2020\"\n  - DateEnd: \"02/01/2020\"\n\n- Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: Snapshot\"\n  - Value: \"0\"\n  - DateStart: \"03/01/2020\"\n  - DateEnd: \"03/01/2020\"\n```\n\n\U0001F536 **Encoded** - Generated by a PLD script out of data obtained from 3rd party sources, typically APIs. This is used to translate 3rd party data in a format that can be easily processed by MAP.\n\n**Examples**\n- World population by territory\n- COVID-19 declared cases\n\n**Snapshot example**\nA 3rd party segment of data encoded like this \n```\n- Country\n  - Name: Malaysia \n  - Year: 2019\n  - Population: 43.000.000\n```\nwould generate a Snapshot encoded with an \U0001F4E6[Answer](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/Answer) like this \n```\n- Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: API\"\n  - Value: \"43.000.000\"\n  - DateStart: \"01/01/2020\"\n  - DateEnd: \"01/01/2020\"\n \n [...]\n \n- Answer\n  - Type: \"Snapshot' \n  - GeneratedBy: \"Algorithm: API\"\n  - Value: \"43.000.000\"\n  - DateStart: \"31/12/2020\"\n  - DateEnd: \"31/12/2020\"\n```\n\n## SourceTypes and Snapshots\nEach \U0001F4E6[DataSet Layer](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/DataSetLayer) has a list of approved \U0001F4E6[SourceType](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/SourceType) from which data is extracted to generate the RAW data for its datapoints.\n\n❗ Each SourceType generates its own Snapshot per dataproint.\nThis is represented in the SourceTypeUID field.\n\n\n## ⚙ Generating Snapshots ❓\n\n**Recalculating Snapshots** can be done\n- Triggered on the spot\n- Scheduled\n- Scheduled with execution triggered by some flag or a pending queue\n\n**General Snapshot generation**\n- Each DSL has a FirstDate and and LastDate\n- When creating a new DSL, all DPs get a Snapshot PER SourceType that is initialized.\n- Compression applied(?)\n- When a new DP is entered for a specific SourceType then\n    - All such snapshots are recalculated\n- When a new DP is entered with StartDate < FirstDate then\n    - All Snapshots of that DSL are expanded \"to the left\"\n    - FirstDate = StartDate\n    - All such snapshots are recalculated\n- When a new DP is entered with LastDate < EndDate then\n    - All Snapshots of that DSL are expanded \"to the right\"\n    - LastDate = EndDate \n    - All such snapshots are recalculated\n\nNote: \nWe need to look into compression while being able to filter PER DATE RANGE unless we download ALL the range since it would be compressed.\n\n## \U0001F4E2 Used by\nThis Model is used in the following modules through these Endpoints:\n- MAP\n    - \U0001F4A0 [Environments](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/paths/~1Environments~1%7BDSLUID%7D~1%7BModule%7D~1%7BEnvironmentUID%7D/get)\n    (Indirecly)\n\n## \U0001F517 URL fields\n- URLCodebase: Perrmalink to the code where this snapshot is generated.\n\n## \U0001F4C5 Date Fields\n- DateFirstCreated: Date and time when the Snapshot was generated for the first time.\n- DateLastUpdated: Date and time when the Snapshot was last generated.\n\n❓ Should this information go on Logs instead?\n\n## \U0001F4CA Stats\n❓ PENDING\n\n## \U0001F4DD Log\n❓ PENDING\n\n## ❓ DUBIOUS FIELDS\nXXXTimeRange\nTHIS MAY NOT BE NEEDED IF WE CONSIDER FIRSTDATE & LASTDATE FROM THE DSL\nPrepopulated.\nThe range extends from \n- FirstDate\nto\n- LastDate\nfor EACH DSL.\n\nXXXFrequency @@@LOOK INTO THIS - NOT SURE IT IS FOR DATE OBJECT\nIndicates how often does the snapshot get rebuilt.\nReference: First day of current year."
type: object
x-examples:
  example-1:
    Snapshot:
      title: "\U0001F441️‍\U0001F5E8️ Snapshot"
      type: object
      description: "# Status: \U0001F441️‍\U0001F5E8️\n\n## ⚡ About\nA Snapshot is represents the individual, daily value of a datapoint. They are used to render the datapoint's value on MAP in a sinple and efficient way, avoiding complex and resource comsiming calculations in the client.\n\nSnapshots are stored in Answer objects. This allows to reuse the same Model for both RAW and Snapshot data since there is no difference between both.\nFor more information about RAW and Snapshot data, see the diagram below.\n\n![image](https://user-images.githubusercontent.com/9198668/104857302-69abf700-5952-11eb-9918-93a6736af696.png)\n❓ >> Make proper diagram\n\n\n## \U0001F310 Expanded information\nMore information about Snapshots can be found on the \n\n## Snapshot generation\nSnapshots can be generated in a number of ways.\n\n\n\U0001F536 **Deduced** - Generated by applying some sort of methodology over the DSE data to extract a pattern that is relevant. This type of snapshot is generated by a PLD script based on the data obtained from all the \U0001F4E6 [DataSet Entry](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/DataSetEntry) in a \U0001F4E6 [DataSet Layer](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/DataSetLayer) or from the **Encoded Snapshopt** data from an external 3rd party (see below).\n\n**Examples**\n- COVID-19 NPIs: Military presence policy without DateEnd\n- COVID-19 NPIs: Schools closed for over 3 months\n\n▶ **Snapshot example from PLD DSL RAW data**: A RAW datapoint encoded with an \U0001F4E6[Answer](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/Answer) like this \n```\n- Answer\n  - Type: \"RAW\" \n  - GeneratedBy: \"Funnel:IS\"\n  - Value: \"3\"\n  - DateStart: \"01/01/2020\"\n  - DateEnd: \"03/01/2020'\n```\nwould generate a Snapshot encoded with an \U0001F4E6[Answer](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/Answer) like this \n```\n- Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: Snapshot\"\n  - Value: \"3\"\n  - DateStart: \"01/01/2020\"\n  - DateEnd: \"01/01/2020\"\n\n- Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: Snapshot\"\n  - Value: \"3\"\n  - DateStart: \"02/01/2020\"\n  - DateEnd: \"02/01/2020\"\n\n- Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: Snapshot\"\n  - Value: \"3\"\n  - DateStart: \"03/01/2020\"\n  - DateEnd: \"03/01/2020\"\n```\n\n▶ **Snapshot example from a 3rd party ENCODED Snapshot data** (see below): \nFollowing the example indicated above, a Snapshot encoded with an [Answer](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/Answer) like this (which was obtained from a 3rd party \n```\n- Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: API\"\n  - Value: \"125.000\"\n  - DateStart: \"01/01/2020\"\n  - DateEnd: \"01/01/2020'\n \n - Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: API\"\n  - Value: \"147.000\"\n  - DateStart: \"02/01/2020\"\n  - DateEnd: \"02/01/2020'\n \n  - Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: API\"\n  - Value: \"152.000\"\n  - DateStart: \"03/01/2020\"\n  - DateEnd: \"03/01/2020'\n```\nwould generate a Snapshot encoded with an \U0001F4E6[Answer](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/Answer) like this \n```\n- Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: Snapshot\"\n  - Value: \"0\"\n  - DateStart: \"01/01/2020\"\n  - DateEnd: \"01/01/2020\"\n\n- Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: Snapshot\"\n  - Value: \"1\"\n  - DateStart: \"02/01/2020\"\n  - DateEnd: \"02/01/2020\"\n\n- Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: Snapshot\"\n  - Value: \"0\"\n  - DateStart: \"03/01/2020\"\n  - DateEnd: \"03/01/2020\"\n```\n\n\n\U0001F536 **Encoded** - Generated by a PLD script out of data obtained from 3rd party sources, typically APIs. This is used to translate 3rd party data in a format that can be easily processed by MAP.\n\n**Examples**\n- World population by territory\n- COVID-19 declared cases\n\n**Snapshot example**\nA 3rd party segment of data encoded like this \n```\n- Country\n  - Name: Malaysia \n  - Year: 2019\n  - Population: 43.000.000\n```\nwould generate a Snapshot encoded with an \U0001F4E6[Answer](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/Answer) like this \n```\n- Answer\n  - Type: \"Snapshot\" \n  - GeneratedBy: \"Algorithm: API\"\n  - Value: \"43.000.000\"\n  - DateStart: \"01/01/2020\"\n  - DateEnd: \"01/01/2020\"\n \n [...]\n \n- Answer\n  - Type: \"Snapshot' \n  - GeneratedBy: \"Algorithm: API\"\n  - Value: \"43.000.000\"\n  - DateStart: \"31/12/2020\"\n  - DateEnd: \"31/12/2020\"\n```\n\n## SourceTypes and Snapshots\nEach \U0001F4E6[DataSet Layer](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/DataSetLayer) has a list of approved \U0001F4E6[SourceType](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/components/schemas/SourceType) from which data is extracted to generate the RAW data for its datapoints.\n\n❗ Each SourceType generates its own Snapshot per dataproint.\nThis is represented in the SourceTypeUID field.\n\n\n## ⚙ Generating Snapshots ❓\n\n**Recalculating Snapshots** can be done\n- Triggered on the spot\n- Scheduled\n- Scheduled with execution triggered by some flag or a pending queue\n\n**General Snapshot generation**\n- Each DSL has a FirstDate and and LastDate\n- When creating a new DSL, all DPs get a Snapshot PER SourceType that is initialized.\n- Compression applied(?)\n- When a new DP is entered for a specific SourceType then\n    - All such snapshots are recalculated\n- When a new DP is entered with StartDate < FirstDate then\n    - All Snapshots of that DSL are expanded \"to the left\"\n    - FirstDate = StartDate\n    - All such snapshots are recalculated\n- When a new DP is entered with LastDate < EndDate then\n    - All Snapshots of that DSL are expanded \"to the right\"\n    - LastDate = EndDate \n    - All such snapshots are recalculated\n\nNote: \nWe need to look into compression while being able to filter PER DATE RANGE unless we download ALL the range since it would be compressed.\n\n## \U0001F4E2 Used by\nThis Model is used in the following modules through these Endpoints:\n- MAP\n    - \U0001F4A0 [Environments](https://theiofoundation.stoplight.io/docs/projectlockdown/API/Reference/Project-Lockdown.v1.json/paths/~1Environments~1%7BDSLUID%7D~1%7BModule%7D~1%7BEnvironmentUID%7D/get)\n    (Indirecly)\n\n## \U0001F517 URL fields\n- URLCodebase: Perrmalink to the code where this snapshot is generated.\n\n## \U0001F4C5 Date Fields\n- DateFirstCreated: Date and time when the Snapshot was generated for the first time.\n- DateLastUpdated: Date and time when the Snapshot was last generated.\n\n❓ Should this information go on Logs instead?\n\n## \U0001F4CA Stats\n❓ PENDING\n\n## \U0001F4DD Log\n❓ PENDING\n\n## ❓ DUBIOUS FIELDS\nXXXTimeRange\nTHIS MAY NOT BE NEEDED IF WE CONSIDER FIRSTDATE & LASTDATE FROM THE DSL\nPrepopulated.\nThe range extends from \n- FirstDate\nto\n- LastDate\nfor EACH DSL.\n\nXXXFrequency @@@LOOK INTO THIS - NOT SURE IT IS FOR DATE OBJECT\nIndicates how often does the snapshot get rebuilt.\nReference: First day of current year.\n\n"
      x-tags:
        - Models
      properties:
        SnapshotUID:
          type: string
          description: "Universal ID\n\U0001F6A7 Document how it is generated"
        SourceTypeUID:
          type: string
          description: Indicates the SourceType associated to this Snapshot.
        DSLUID:
          type: string
          description: DSL to which this Snapshot is associated with.
        Type:
          type: string
          enum:
            - DEDUCED
            - ENCODED
          description: |-
            Indicates the type of Snapshot.
            See Model documentation for more details.
        XXXFrequency:
          type: string
          description: ''
          enum:
            - OnSpot
            - Scheduled - Daily
            - Scheduled - Weekly
            - Scheduled - Monthly
        Stats:
          type: array
          description: "\U0001F6A7\nStatistics related to this object."
          items:
            $ref: '#/components/schemas/Stat'
        Answers:
          type: array
          description: 'Collection of Answers conforming '
          items:
            $ref: '#/components/schemas/Answer'
        URLCodebase:
          $ref: '#/components/schemas/Link'
        DateLastUpdated:
          $ref: '#/components/schemas/Date'
        DateFirstCreated:
          $ref: '#/components/schemas/Date'
        URLCodebaseBookmarkID:
          type: string
          description: |-
            ID used in the codebase to bookmark where in the code is this Snapshot generated.

            The URLCodebase field is generated with a script that seeks for this bookmark ID then extracts the URL.
        Log:
          type: array
          description: "\U0001F6A7\nLog of operations related to this object."
          items:
            $ref: '#/components/schemas/Log'
      required:
        - SnapshotUID
        - SourceTypeUID
        - DSLUID
        - Type
        - Answers
title: Snapshot
x-internal: false
properties:
  SnapshotUID:
    type: string
  SourceTypeUID:
    type: string
  DSLUID:
    type: string
  XXXFrequency:
    type: string
  Stats:
    type: array
    items:
      $ref: ../Reference/Project-Lockdown.v2.json#/components/schemas/Stat
  Answers:
    type: array
    items:
      $ref: ../Reference/Project-Lockdown.v2.json#/components/schemas/Answer
  URLCodebase:
    $ref: ../Reference/Project-Lockdown.v2.json#/components/schemas/Link
  DateLastUpdated:
    $ref: ../Reference/Project-Lockdown.v2.json#/components/schemas/Date
  DateFirstCreated:
    $ref: ../Reference/Project-Lockdown.v2.json#/components/schemas/Date
  URLCodebaseBookmarkID:
    type: string
  Log:
    type: array
    items:
      $ref: ../Reference/Project-Lockdown.v2.json#/components/schemas/Log
required:
  - SnapshotUID
